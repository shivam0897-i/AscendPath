import{j as e,r as N,l as E,m as B,B as v,n as V}from"./index-BjMCP1iW.js";import{T as W,a as q,b as S,c as T}from"./tabs-BiISDy0E.js";import{u as C,F as k,a as o,b as c,c as d,d as m,e as x,t as L,o as z,s as j}from"./form-CnvQ3NT0.js";import{I as h}from"./input-DcU_5C8T.js";import{N as M}from"./Navbar-C76yzdJ5.js";import"./label-C-03lsNw.js";const I=()=>e.jsx("svg",{className:"mr-2 h-4 w-4","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:e.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.5 512 244 512 110.5 512 0 401.5 0 265.2 0 128.5 109.3 18.3 244 18.3c65.7 0 121.7 22.9 166.9 62.3l-68.2 67.4c-20.8-19.8-52.2-33.8-98.7-33.8-82.8 0-149.9 67.4-149.9 150.7s67.1 150.7 149.9 150.7c95.4 0 128.1-68.9 132.6-104.3H244v-85.3h236.1c2.3 12.7 3.9 26.1 3.9 40.8z"})}),G=z({email:j().email({message:"Please enter a valid email address"}),password:j().min(6,{message:"Password must be at least 6 characters"})}),O=G.extend({firstName:j().min(1,{message:"First name is required"}),lastName:j().min(1,{message:"Last name is required"}),confirmPassword:j().min(6,{message:"Password must be at least 6 characters"})}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),A=({mode:t,onSuccess:u})=>{const[a,i]=N.useState(!1),{signIn:g,signUp:w,signInWithGoogle:p,isLoading:r}=E(),{toast:b}=B(),f=C({resolver:L(G),defaultValues:{email:"",password:""}}),n=C({resolver:L(O),defaultValues:{email:"",password:"",firstName:"",lastName:"",confirmPassword:""}}),y=async s=>{i(!0);try{if(t==="login"){const{error:l}=await g(s.email,s.password);l?b({title:"Login failed",description:l.message||"Please check your credentials and try again",variant:"destructive"}):(b({title:"Welcome back!",description:"You have successfully logged in.",duration:1e3}),u&&u())}else{const l=s,{error:F}=await w(l.email,l.password,l.firstName,l.lastName);F?b({title:"Signup failed",description:F.message||"There was an error creating your account",variant:"destructive"}):u&&u()}}catch{b({title:"An error occurred",description:"Please try again later",variant:"destructive"})}finally{i(!1)}},P=async()=>{i(!0);try{await p()}catch{}finally{}};return e.jsx("div",{className:"w-full max-w-md mx-auto",children:t==="login"?e.jsx(k,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(y),className:"space-y-6",children:[e.jsx(o,{control:f.control,name:"email",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Email"}),e.jsx(m,{children:e.jsx(h,{placeholder:"you@example.com",...s,disabled:r||a})}),e.jsx(x,{})]})}),e.jsx(o,{control:f.control,name:"password",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Password"}),e.jsx(m,{children:e.jsx(h,{type:"password",placeholder:"••••••••",...s,disabled:r||a})}),e.jsx(x,{})]})}),e.jsx(v,{type:"submit",className:"w-full bg-terracotta hover:bg-terracotta-dark shadow-warm",disabled:r||a,children:a?"Logging in...":"Log in"}),e.jsxs("div",{className:"relative my-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),e.jsx(v,{variant:"outline",type:"button",className:"w-full border-charcoal/20 hover:border-terracotta hover:text-terracotta",onClick:P,disabled:r||a,children:r?"Processing...":e.jsxs(e.Fragment,{children:[e.jsx(I,{})," Google"]})})]})}):e.jsx(k,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(y),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(o,{control:n.control,name:"firstName",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"First Name"}),e.jsx(m,{children:e.jsx(h,{placeholder:"Jane",...s,disabled:r||a})}),e.jsx(x,{})]})}),e.jsx(o,{control:n.control,name:"lastName",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Last Name"}),e.jsx(m,{children:e.jsx(h,{placeholder:"Doe",...s,disabled:r||a})}),e.jsx(x,{})]})})]}),e.jsx(o,{control:n.control,name:"email",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Email"}),e.jsx(m,{children:e.jsx(h,{placeholder:"you@example.com",...s,disabled:r||a})}),e.jsx(x,{})]})}),e.jsx(o,{control:n.control,name:"password",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Password"}),e.jsx(m,{children:e.jsx(h,{type:"password",placeholder:"••••••••",...s,disabled:r||a})}),e.jsx(x,{})]})}),e.jsx(o,{control:n.control,name:"confirmPassword",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Confirm Password"}),e.jsx(m,{children:e.jsx(h,{type:"password",placeholder:"••••••••",...s,disabled:r||a})}),e.jsx(x,{})]})}),e.jsx(v,{type:"submit",className:"w-full bg-terracotta hover:bg-terracotta-dark shadow-warm",disabled:r||a,children:a?"Creating account...":"Create account"}),e.jsxs("div",{className:"relative my-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),e.jsx(v,{variant:"outline",type:"button",className:"w-full border-charcoal/20 hover:border-terracotta hover:text-terracotta",onClick:P,disabled:r||a,children:r?"Processing...":e.jsxs(e.Fragment,{children:[e.jsx(I,{})," Google"]})})]})})})},K=()=>{const[t,u]=N.useState("login"),a=V(),{user:i,isLoading:g}=E();N.useEffect(()=>{!g&&i&&a("/dashboard")},[i,g,a]);const w=r=>{u(r)},p=()=>{a("/dashboard")};return g||i?e.jsx("div",{className:"min-h-screen flex items-center justify-center"}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(M,{minimal:!0}),e.jsxs("div",{className:"flex-grow flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-warm-gradient relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-20 right-20 w-72 h-72 bg-terracotta/10 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute bottom-20 left-20 w-64 h-64 bg-sage/10 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"max-w-md w-full space-y-8 bg-card p-8 rounded-2xl shadow-warm-lg border border-terracotta/10 relative z-10",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-heading font-bold gradient-text",children:"AscendPath"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:t==="login"?"Welcome back to your journey":"Begin your learning adventure"})]}),e.jsxs(W,{value:t,onValueChange:w,className:"w-full",children:[e.jsxs(q,{className:"grid w-full grid-cols-2 mb-6 bg-cream/50 dark:bg-charcoal/50",children:[e.jsx(S,{value:"login",className:"data-[state=active]:bg-terracotta data-[state=active]:text-white",children:"Login"}),e.jsx(S,{value:"signup",className:"data-[state=active]:bg-terracotta data-[state=active]:text-white",children:"Sign Up"})]}),e.jsx(T,{value:"login",children:e.jsx(A,{mode:"login",onSuccess:p})}),e.jsx(T,{value:"signup",children:e.jsx(A,{mode:"signup",onSuccess:p})})]})]})]})]})};export{K as default};
