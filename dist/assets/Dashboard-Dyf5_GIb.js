var Ve=s=>{throw TypeError(s)};var Ne=(s,t,r)=>t.has(s)||Ve("Cannot "+r);var i=(s,t,r)=>(Ne(s,t,"read from private field"),r?r.call(s):t.get(s)),v=(s,t,r)=>t.has(s)?Ve("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,r),p=(s,t,r,a)=>(Ne(s,t,"write to private field"),a?a.call(s,r):t.set(s,r),r),j=(s,t,r)=>(Ne(s,t,"access private method"),r);import{x as lt,y as We,z as I,E as pe,F as me,G as yt,H as Pe,I as Ye,J as wt,K as Ct,M as Rt,N as Je,O as ge,Q as Xe,T as Pt,r as f,U as Qe,c as Fe,j as e,P as be,g as Ot,a as kt,d as St,b as Tt,u as Et,f as Lt,B as te,l as je,v as Be,k as Ze,n as Mt,t as It}from"./index-BZCaGWrl.js";import{F as ye}from"./Footer-DV8zBGh_.js";import{C as F,c as B,d as Oe,a as Z,b as ee,e as ue}from"./card-BUu087HL.js";import{P as ot}from"./progress-DGjpNo-2.js";import{T as _t,a as Ut,b as we,c as Ce}from"./tabs-SICFpIPQ.js";import{B as ke}from"./badge-BGLq2fNn.js";import{N as Re}from"./Navbar-9LRJRQIr.js";import{b as At,a as Dt}from"./index-UOOHzlnL.js";import{C as Qt}from"./checkbox-w9TewyRK.js";import{C as Ft}from"./chevron-down-Dh26S3cc.js";import{C as Se}from"./clock-iQANyfSR.js";import{B as xe}from"./book-open-CHkXK_MK.js";import{G as Bt}from"./graduation-cap-BIZJRkia.js";import{A as et}from"./arrow-right-DI_24-Js.js";import{A as zt}from"./award-CDYCsUY6.js";var S,m,de,P,W,se,z,M,he,re,ae,Y,J,q,ie,x,ce,Te,Ee,Le,Me,Ie,_e,Ue,ct,it,qt=(it=class extends lt{constructor(t,r){super();v(this,x);v(this,S);v(this,m);v(this,de);v(this,P);v(this,W);v(this,se);v(this,z);v(this,M);v(this,he);v(this,re);v(this,ae);v(this,Y);v(this,J);v(this,q);v(this,ie,new Set);this.options=r,p(this,S,t),p(this,M,null),p(this,z,We()),this.options.experimental_prefetchInRender||i(this,z).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,m).addObserver(this),tt(i(this,m),this.options)?j(this,x,ce).call(this):this.updateResult(),j(this,x,Me).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ae(i(this,m),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ae(i(this,m),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,j(this,x,Ie).call(this),j(this,x,_e).call(this),i(this,m).removeObserver(this)}setOptions(t,r){const a=this.options,n=i(this,m);if(this.options=i(this,S).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof I(this.options.enabled,i(this,m))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");j(this,x,Ue).call(this),i(this,m).setOptions(this.options),a._defaulted&&!pe(this.options,a)&&i(this,S).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,m),observer:this});const l=this.hasListeners();l&&st(i(this,m),n,this.options,a)&&j(this,x,ce).call(this),this.updateResult(r),l&&(i(this,m)!==n||I(this.options.enabled,i(this,m))!==I(a.enabled,i(this,m))||me(this.options.staleTime,i(this,m))!==me(a.staleTime,i(this,m)))&&j(this,x,Te).call(this);const o=j(this,x,Ee).call(this);l&&(i(this,m)!==n||I(this.options.enabled,i(this,m))!==I(a.enabled,i(this,m))||o!==i(this,q))&&j(this,x,Le).call(this,o)}getOptimisticResult(t){const r=i(this,S).getQueryCache().build(i(this,S),t),a=this.createResult(r,t);return Ht(this,a)&&(p(this,P,a),p(this,se,this.options),p(this,W,i(this,m).state)),a}getCurrentResult(){return i(this,P)}trackResult(t,r){const a={};return Object.keys(t).forEach(n=>{Object.defineProperty(a,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),r==null||r(n),t[n])})}),a}trackProp(t){i(this,ie).add(t)}getCurrentQuery(){return i(this,m)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=i(this,S).defaultQueryOptions(t),a=i(this,S).getQueryCache().build(i(this,S),r);return a.fetch().then(()=>this.createResult(a,r))}fetch(t){return j(this,x,ce).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,P)))}createResult(t,r){var le;const a=i(this,m),n=this.options,l=i(this,P),o=i(this,W),d=i(this,se),h=t!==a?t.state:i(this,de),{state:g}=t;let u={...g},R=!1,N;if(r._optimisticResults){const w=this.hasListeners(),_=!w&&tt(t,r),U=w&&st(t,a,r,n);(_||U)&&(u={...u,...Rt(g.data,t.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:E,errorUpdatedAt:O,status:k}=u;if(r.select&&u.data!==void 0)if(l&&u.data===(o==null?void 0:o.data)&&r.select===i(this,he))N=i(this,re);else try{p(this,he,r.select),N=r.select(u.data),N=Je(l==null?void 0:l.data,N,r),p(this,re,N),p(this,M,null)}catch(w){p(this,M,w)}else N=u.data;if(r.placeholderData!==void 0&&N===void 0&&k==="pending"){let w;if(l!=null&&l.isPlaceholderData&&r.placeholderData===(d==null?void 0:d.placeholderData))w=l.data;else if(w=typeof r.placeholderData=="function"?r.placeholderData((le=i(this,ae))==null?void 0:le.state.data,i(this,ae)):r.placeholderData,r.select&&w!==void 0)try{w=r.select(w),p(this,M,null)}catch(_){p(this,M,_)}w!==void 0&&(k="success",N=Je(l==null?void 0:l.data,w,r),R=!0)}i(this,M)&&(E=i(this,M),N=i(this,re),O=Date.now(),k="error");const L=u.fetchStatus==="fetching",C=k==="pending",Q=k==="error",ne=C&&L,X=N!==void 0,y={status:k,fetchStatus:u.fetchStatus,isPending:C,isSuccess:k==="success",isError:Q,isInitialLoading:ne,isLoading:ne,data:N,dataUpdatedAt:u.dataUpdatedAt,error:E,errorUpdatedAt:O,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>h.dataUpdateCount||u.errorUpdateCount>h.errorUpdateCount,isFetching:L,isRefetching:L&&!C,isLoadingError:Q&&!X,isPaused:u.fetchStatus==="paused",isPlaceholderData:R,isRefetchError:Q&&X,isStale:ze(t,r),refetch:this.refetch,promise:i(this,z)};if(this.options.experimental_prefetchInRender){const w=b=>{y.status==="error"?b.reject(y.error):y.data!==void 0&&b.resolve(y.data)},_=()=>{const b=p(this,z,y.promise=We());w(b)},U=i(this,z);switch(U.status){case"pending":t.queryHash===a.queryHash&&w(U);break;case"fulfilled":(y.status==="error"||y.data!==U.value)&&_();break;case"rejected":(y.status!=="error"||y.error!==U.reason)&&_();break}}return y}updateResult(t){const r=i(this,P),a=this.createResult(i(this,m),this.options);if(p(this,W,i(this,m).state),p(this,se,this.options),i(this,W).data!==void 0&&p(this,ae,i(this,m)),pe(a,r))return;p(this,P,a);const n={},l=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,d=typeof o=="function"?o():o;if(d==="all"||!d&&!i(this,ie).size)return!0;const c=new Set(d??i(this,ie));return this.options.throwOnError&&c.add("error"),Object.keys(i(this,P)).some(h=>{const g=h;return i(this,P)[g]!==r[g]&&c.has(g)})};(t==null?void 0:t.listeners)!==!1&&l()&&(n.listeners=!0),j(this,x,ct).call(this,{...n,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&j(this,x,Me).call(this)}},S=new WeakMap,m=new WeakMap,de=new WeakMap,P=new WeakMap,W=new WeakMap,se=new WeakMap,z=new WeakMap,M=new WeakMap,he=new WeakMap,re=new WeakMap,ae=new WeakMap,Y=new WeakMap,J=new WeakMap,q=new WeakMap,ie=new WeakMap,x=new WeakSet,ce=function(t){j(this,x,Ue).call(this);let r=i(this,m).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(yt)),r},Te=function(){j(this,x,Ie).call(this);const t=me(this.options.staleTime,i(this,m));if(Pe||i(this,P).isStale||!Ye(t))return;const a=wt(i(this,P).dataUpdatedAt,t)+1;p(this,Y,setTimeout(()=>{i(this,P).isStale||this.updateResult()},a))},Ee=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,m)):this.options.refetchInterval)??!1},Le=function(t){j(this,x,_e).call(this),p(this,q,t),!(Pe||I(this.options.enabled,i(this,m))===!1||!Ye(i(this,q))||i(this,q)===0)&&p(this,J,setInterval(()=>{(this.options.refetchIntervalInBackground||Ct.isFocused())&&j(this,x,ce).call(this)},i(this,q)))},Me=function(){j(this,x,Te).call(this),j(this,x,Le).call(this,j(this,x,Ee).call(this))},Ie=function(){i(this,Y)&&(clearTimeout(i(this,Y)),p(this,Y,void 0))},_e=function(){i(this,J)&&(clearInterval(i(this,J)),p(this,J,void 0))},Ue=function(){const t=i(this,S).getQueryCache().build(i(this,S),this.options);if(t===i(this,m))return;const r=i(this,m);p(this,m,t),p(this,de,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},ct=function(t){ge.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(i(this,P))}),i(this,S).getQueryCache().notify({query:i(this,m),type:"observerResultsUpdated"})})},it);function $t(s,t){return I(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function tt(s,t){return $t(s,t)||s.state.data!==void 0&&Ae(s,t,t.refetchOnMount)}function Ae(s,t,r){if(I(t.enabled,s)!==!1){const a=typeof r=="function"?r(s):r;return a==="always"||a!==!1&&ze(s,t)}return!1}function st(s,t,r,a){return(s!==t||I(a.enabled,s)===!1)&&(!r.suspense||s.state.status!=="error")&&ze(s,r)}function ze(s,t){return I(t.enabled,s)!==!1&&s.isStaleByTime(me(t.staleTime,s))}function Ht(s,t){return!pe(s.getCurrentResult(),t)}var $,H,T,A,D,fe,De,nt,Gt=(nt=class extends lt{constructor(t,r){super();v(this,D);v(this,$);v(this,H);v(this,T);v(this,A);p(this,$,t),this.setOptions(r),this.bindMethods(),j(this,D,fe).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var a;const r=this.options;this.options=i(this,$).defaultMutationOptions(t),pe(this.options,r)||i(this,$).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,T),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Xe(r.mutationKey)!==Xe(this.options.mutationKey)?this.reset():((a=i(this,T))==null?void 0:a.state.status)==="pending"&&i(this,T).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=i(this,T))==null||t.removeObserver(this)}onMutationUpdate(t){j(this,D,fe).call(this),j(this,D,De).call(this,t)}getCurrentResult(){return i(this,H)}reset(){var t;(t=i(this,T))==null||t.removeObserver(this),p(this,T,void 0),j(this,D,fe).call(this),j(this,D,De).call(this)}mutate(t,r){var a;return p(this,A,r),(a=i(this,T))==null||a.removeObserver(this),p(this,T,i(this,$).getMutationCache().build(i(this,$),this.options)),i(this,T).addObserver(this),i(this,T).execute(t)}},$=new WeakMap,H=new WeakMap,T=new WeakMap,A=new WeakMap,D=new WeakSet,fe=function(){var r;const t=((r=i(this,T))==null?void 0:r.state)??Pt();p(this,H,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},De=function(t){ge.batch(()=>{var r,a,n,l,o,d,c,h;if(i(this,A)&&this.hasListeners()){const g=i(this,H).variables,u=i(this,H).context;(t==null?void 0:t.type)==="success"?((a=(r=i(this,A)).onSuccess)==null||a.call(r,t.data,g,u),(l=(n=i(this,A)).onSettled)==null||l.call(n,t.data,null,g,u)):(t==null?void 0:t.type)==="error"&&((d=(o=i(this,A)).onError)==null||d.call(o,t.error,g,u),(h=(c=i(this,A)).onSettled)==null||h.call(c,void 0,t.error,g,u))}this.listeners.forEach(g=>{g(i(this,H))})})},nt),dt=f.createContext(!1),Kt=()=>f.useContext(dt);dt.Provider;function Vt(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Wt=f.createContext(Vt()),Yt=()=>f.useContext(Wt);function ht(s,t){return typeof s=="function"?s(...t):!!s}function ut(){}var Jt=(s,t)=>{(s.suspense||s.throwOnError)&&(t.isReset()||(s.retryOnMount=!1))},Xt=s=>{f.useEffect(()=>{s.clearReset()},[s])},Zt=({result:s,errorResetBoundary:t,throwOnError:r,query:a})=>s.isError&&!t.isReset()&&!s.isFetching&&a&&ht(r,[s.error,a]),es=s=>{s.suspense&&(s.staleTime===void 0&&(s.staleTime=1e3),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3)))},ts=(s,t)=>s.isLoading&&s.isFetching&&!t,ss=(s,t)=>(s==null?void 0:s.suspense)&&t.isPending,rt=(s,t,r)=>t.fetchOptimistic(s).catch(()=>{r.clearReset()});function rs(s,t,r){var g,u,R,N,E;const a=Qe(),n=Kt(),l=Yt(),o=a.defaultQueryOptions(s);(u=(g=a.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||u.call(g,o),o._optimisticResults=n?"isRestoring":"optimistic",es(o),Jt(o,l),Xt(l);const d=!a.getQueryCache().get(o.queryHash),[c]=f.useState(()=>new t(a,o)),h=c.getOptimisticResult(o);if(f.useSyncExternalStore(f.useCallback(O=>{const k=n?()=>{}:c.subscribe(ge.batchCalls(O));return c.updateResult(),k},[c,n]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),ss(o,h))throw rt(o,c,l);if(Zt({result:h,errorResetBoundary:l,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash)}))throw h.error;if((N=(R=a.getDefaultOptions().queries)==null?void 0:R._experimental_afterQuery)==null||N.call(R,o,h),o.experimental_prefetchInRender&&!Pe&&ts(h,n)){const O=d?rt(o,c,l):(E=a.getQueryCache().get(o.queryHash))==null?void 0:E.promise;O==null||O.catch(ut).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?h:c.trackResult(h)}function mt(s,t){return rs(s,qt)}function as(s,t){const r=Qe(),[a]=f.useState(()=>new Gt(r,s));f.useEffect(()=>{a.setOptions(s)},[a,s]);const n=f.useSyncExternalStore(f.useCallback(o=>a.subscribe(ge.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),l=f.useCallback((o,d)=>{a.mutate(o,d).catch(ut)},[a]);if(n.error&&ht(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:l,mutateAsync:n.mutate}}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Fe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=Fe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=Fe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var ns="Separator",at="horizontal",ls=["horizontal","vertical"],ft=f.forwardRef((s,t)=>{const{decorative:r,orientation:a=at,...n}=s,l=os(a)?a:at,d=r?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return e.jsx(be.div,{"data-orientation":l,...d,...n,ref:t})});ft.displayName=ns;function os(s){return ls.includes(s)}var pt=ft;const xt=f.forwardRef(({className:s,orientation:t="horizontal",decorative:r=!0,...a},n)=>e.jsx(pt,{ref:n,decorative:r,orientation:t,className:Ot("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...a}));xt.displayName=pt.displayName;var $e="Collapsible",[cs,zs]=kt($e),[ds,He]=cs($e),gt=f.forwardRef((s,t)=>{const{__scopeCollapsible:r,open:a,defaultOpen:n,disabled:l,onOpenChange:o,...d}=s,[c=!1,h]=At({prop:a,defaultProp:n,onChange:o});return e.jsx(ds,{scope:r,disabled:l,contentId:Dt(),open:c,onOpenToggle:f.useCallback(()=>h(g=>!g),[h]),children:e.jsx(be.div,{"data-state":Ke(c),"data-disabled":l?"":void 0,...d,ref:t})})});gt.displayName=$e;var bt="CollapsibleTrigger",jt=f.forwardRef((s,t)=>{const{__scopeCollapsible:r,...a}=s,n=He(bt,r);return e.jsx(be.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":Ke(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...a,ref:t,onClick:St(s.onClick,n.onOpenToggle)})});jt.displayName=bt;var Ge="CollapsibleContent",vt=f.forwardRef((s,t)=>{const{forceMount:r,...a}=s,n=He(Ge,s.__scopeCollapsible);return e.jsx(Tt,{present:r||n.open,children:({present:l})=>e.jsx(hs,{...a,ref:t,present:l})})});vt.displayName=Ge;var hs=f.forwardRef((s,t)=>{const{__scopeCollapsible:r,present:a,children:n,...l}=s,o=He(Ge,r),[d,c]=f.useState(a),h=f.useRef(null),g=Et(t,h),u=f.useRef(0),R=u.current,N=f.useRef(0),E=N.current,O=o.open||d,k=f.useRef(O),L=f.useRef();return f.useEffect(()=>{const C=requestAnimationFrame(()=>k.current=!1);return()=>cancelAnimationFrame(C)},[]),Lt(()=>{const C=h.current;if(C){L.current=L.current||{transitionDuration:C.style.transitionDuration,animationName:C.style.animationName},C.style.transitionDuration="0s",C.style.animationName="none";const Q=C.getBoundingClientRect();u.current=Q.height,N.current=Q.width,k.current||(C.style.transitionDuration=L.current.transitionDuration,C.style.animationName=L.current.animationName),c(a)}},[o.open,a]),e.jsx(be.div,{"data-state":Ke(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!O,...l,ref:g,style:{"--radix-collapsible-content-height":R?`${R}px`:void 0,"--radix-collapsible-content-width":E?`${E}px`:void 0,...s.style},children:O&&n})});function Ke(s){return s?"open":"closed"}var us=gt;const ms=us,fs=jt,ps=vt,xs=({phases:s,onMilestoneToggle:t})=>{const[r,a]=f.useState(()=>{const l={},o=s.findIndex(d=>(d.completionPercentage??0)<100);return l[o>=0?o:0]=!0,l}),n=l=>{a(o=>({...o,[l]:!o[l]}))};return e.jsx("div",{className:"space-y-8",children:s.map((l,o)=>e.jsxs("div",{className:"relative",children:[o<s.length-1&&e.jsx("div",{className:"absolute left-6 top-16 bottom-0 w-0.5 bg-gray-200 z-0"}),e.jsxs(ms,{open:!!r[o],onOpenChange:()=>n(o),children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"relative z-10",children:e.jsx("div",{className:`flex items-center justify-center h-12 w-12 rounded-full border-2 ${l.completionPercentage===100?"bg-green-100 border-green-500 text-green-500":(l.completionPercentage??0)>0?"bg-empowerPurple-light border-empowerPurple text-empowerPurple":"bg-gray-100 border-gray-300 text-gray-500"}`,children:e.jsx("span",{className:"text-lg font-bold",children:o+1})})}),e.jsxs("div",{className:"ml-4 flex-grow",children:[e.jsx(fs,{asChild:!0,children:e.jsxs(te,{variant:"ghost",className:"p-0 h-auto w-full justify-between hover:bg-transparent",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h3",{className:"text-xl font-semibold mr-2",children:l.title}),e.jsxs(ke,{variant:"outline",className:"text-xs",children:[l.completionPercentage??0,"% complete"]})]}),e.jsx("p",{className:"text-gray-600 mt-1",children:l.description})]}),e.jsx(Ft,{className:`h-5 w-5 transition-transform ${r[o]?"transform rotate-180":""}`})]})}),e.jsx("div",{className:"mt-2",children:e.jsx(ot,{value:l.completionPercentage??0,className:"h-1.5"})})]})]}),e.jsx(ps,{className:"ml-16 mt-4 space-y-4",children:l.milestones.map(d=>{const c=d.completed;return e.jsx(F,{className:`overflow-hidden border-l-4 ${c?"border-l-green-500":"border-l-empowerPurple"}`,children:e.jsx(B,{className:"p-4 flex items-start justify-between",children:e.jsxs("div",{className:"flex-grow mr-4",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(Qt,{id:`milestone-check-${d.id}`,checked:c,onCheckedChange:()=>t(d.id,c),className:"mr-3 border-gray-400 data-[state=checked]:bg-empowerPurple data-[state=checked]:border-empowerPurple"}),e.jsx("label",{htmlFor:`milestone-check-${d.id}`,className:"font-medium text-lg cursor-pointer",children:d.title})]}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm pl-7",children:d.description}),e.jsxs("div",{className:"flex items-center mt-3 text-sm text-gray-500 pl-7",children:[e.jsx(Se,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["Est: ",d.estimatedTime||"N/A"]})]}),d.resources&&d.resources.length>0&&e.jsxs("div",{className:"mt-4 pl-7",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"Resources:"}),e.jsx("div",{className:"space-y-2",children:d.resources.map(h=>e.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-1.5 pr-2 hover:bg-gray-50 rounded-md text-sm group",children:[e.jsx("div",{className:"w-8 h-8 rounded overflow-hidden mr-2 flex-shrink-0 bg-gray-100 flex items-center justify-center",children:h.imageUrl?e.jsx("img",{src:h.imageUrl,alt:h.title,className:"w-full h-full object-cover"}):e.jsx(xe,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"font-medium group-hover:text-empowerPurple transition-colors",children:h.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:[h.type," • ",h.platform]})]}),e.jsx(qe,{className:"h-4 w-4 text-gray-400 group-hover:text-empowerPurple ml-2 transition-colors"})]},h.id))})]})]})})},d.id)})})]})]},o))})},gs=({resource:s})=>{const t=s.imageUrl||"/placeholder.svg";return e.jsxs(F,{className:"overflow-hidden h-full flex flex-col hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"h-36 overflow-hidden bg-gray-100 flex items-center justify-center",children:[" ",e.jsx("img",{src:t,alt:s.title,className:`w-full h-full transition-transform hover:scale-105 ${s.imageUrl?"object-cover":"object-contain p-4 text-gray-400"}`,onError:r=>{r.target.src="/placeholder.svg",r.target.classList.add("object-contain","p-4","text-gray-400"),r.target.classList.remove("object-cover")}}),!s.imageUrl&&e.jsx(xe,{className:"w-12 h-12 text-gray-300"})]}),e.jsxs(B,{className:"p-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-xs font-medium bg-gray-100 text-gray-700 px-2 py-1 rounded",children:s.type}),e.jsx("span",{className:"text-xs text-gray-500",children:s.platform})]}),e.jsx("h3",{className:"font-medium mb-2",children:s.title})]}),e.jsx(Oe,{className:"p-4 pt-0",children:e.jsx(te,{asChild:!0,variant:"outline",size:"sm",className:"w-full",children:e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:["Access Resource",e.jsx(qe,{className:"h-3 w-3 ml-2"})]})})})]})};async function bs(s){const{data:t,error:r}=await Be.from("profiles").select("*").eq("id",s).single();if(r&&r.code!=="PGRST116")throw r;return t}async function js(s){const{data:t,error:r}=await Be.from("roadmaps").select("*, phases(*, milestones(*, resources(*)))").eq("user_id",s).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(r)throw r;return t}function vs(){const{user:s}=je();return mt({queryKey:["profile",s==null?void 0:s.id],queryFn:()=>bs(s.id),enabled:!!(s!=null&&s.id),staleTime:5*60*1e3,retry:1})}function Ns(){const{user:s}=je();return mt({queryKey:["roadmap",s==null?void 0:s.id],queryFn:()=>js(s.id),enabled:!!(s!=null&&s.id),staleTime:5*60*1e3,retry:1})}function ys(){const s=Qe(),{user:t}=je();return as({mutationFn:async({milestoneId:r,newStatus:a})=>{const{error:n}=await Be.from("milestones").update({completed:a,updated_at:new Date().toISOString()}).eq("id",r);if(n)throw n;return{milestoneId:r,newStatus:a}},onMutate:async({milestoneId:r,newStatus:a})=>{await s.cancelQueries({queryKey:["roadmap",t==null?void 0:t.id]});const n=s.getQueryData(["roadmap",t==null?void 0:t.id]);if(n){const l={...n,phases:n.phases.map(o=>{const d=o.milestones.findIndex(c=>c.id===r);if(d!==-1){const c=[...o.milestones];c[d]={...c[d],completed:a,updated_at:new Date().toISOString()};const h=c.length,g=c.filter(R=>R.completed).length,u=h>0?Math.round(g/h*100):0;return{...o,milestones:c,completion_percentage:u}}return o})};s.setQueryData(["roadmap",t==null?void 0:t.id],l)}return{previousRoadmap:n}},onSuccess:(r,{newStatus:a})=>{Ze.success(a?"Milestone completed!":"Milestone marked incomplete.")},onError:(r,a,n)=>{n!=null&&n.previousRoadmap&&s.setQueryData(["roadmap",t==null?void 0:t.id],n.previousRoadmap),Ze.error(`Update failed: ${r.message}`)}})}function ws(s){if(!(s!=null&&s.phases))return 0;const t=s.phases.flatMap(n=>n.milestones||[]),r=t.length;if(r===0)return 0;const a=t.filter(n=>n.completed===!0).length;return Math.round(a/r*100)}function Cs(s){return s!=null&&s.phases?s.phases.map(t=>{var r;return{...t,completionPercentage:t.completion_percentage,milestones:((r=t.milestones)==null?void 0:r.map(a=>{var n;return{...a,estimatedTime:a.estimated_time,completed:a.completed===!0,resources:((n=a.resources)==null?void 0:n.map(l=>({...l,imageUrl:l.image_url})))||[]}}))||[]}}):[]}const Rs={getGoal:s=>{var t,r,a;return((r=(t=s==null?void 0:s.goals)==null?void 0:t.find(n=>n.toLowerCase().startsWith("achieve goal:")))==null?void 0:r.split(":").slice(1).join(":").trim())||((a=s==null?void 0:s.goals)==null?void 0:a[0])||"-"},getFieldLabel:s=>{var t,r,a;return((r=(t=s==null?void 0:s.skills)==null?void 0:t.find(n=>n.toLowerCase().startsWith("field:")))==null?void 0:r.split(":").slice(1).join(":").trim())||((a=s==null?void 0:s.skills)==null?void 0:a[0])||"-"},getTimelineLabel:s=>{var t,r,a;return((a=(r=(t=s==null?void 0:s.goals)==null?void 0:t.find(n=>n.toLowerCase().includes("within")))==null?void 0:r.split("within").pop())==null?void 0:a.trim())||"-"},getExperienceLabel:s=>{var t,r;return((r=(t=s==null?void 0:s.skills)==null?void 0:t.find(a=>a.toLowerCase().startsWith("experience:")))==null?void 0:r.split(":").slice(1).join(":").trim())||"-"},getBackgroundLabel:s=>{var t;return((t=s==null?void 0:s.background)==null?void 0:t.replace(/_/g," ").replace(/ \w/g,r=>r.toUpperCase()))||"N/A"}},qs=()=>{var w,_,U;const s=Mt(),{user:t,isLoading:r}=je(),[a,n]=f.useState("overview"),{data:l,isLoading:o,error:d}=vs(),{data:c,isLoading:h,error:g}=Ns(),u=ys();f.useEffect(()=>{!r&&!t&&s("/auth")},[t,r,s]),f.useEffect(()=>{!o&&!l&&t&&s("/onboarding")},[l,o,t,s]);const R=ws(c),N=async(b,K)=>{u.mutate({milestoneId:b,newStatus:!K})},{getGoal:E,getFieldLabel:O,getTimelineLabel:k,getExperienceLabel:L,getBackgroundLabel:C}=Rs,Q=r||o||h,ne=(d==null?void 0:d.message)||(g==null?void 0:g.message);if(Q)return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-background",children:[e.jsx(It,{className:"h-12 w-12 animate-spin text-empowerPurple"})," ",e.jsx("p",{className:"ml-4 text-lg text-muted-foreground",children:"Loading..."})]});if(ne)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background p-4",children:[e.jsx(Re,{}),e.jsxs("div",{className:"text-center",children:[e.jsx(oe,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2 text-destructive-foreground",children:"Error"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:ne}),e.jsx(te,{onClick:()=>window.location.reload(),children:"Try Again"})]}),e.jsx(ye,{})]});if(!l)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background p-4",children:[e.jsx(Re,{}),e.jsxs("div",{className:"text-center",children:[e.jsx(oe,{className:"h-12 w-12 mx-auto text-yellow-500 dark:text-yellow-400 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2 text-yellow-700 dark:text-yellow-300",children:"Profile Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Please complete onboarding."}),e.jsx(te,{onClick:()=>s("/onboarding"),children:"Go to Onboarding"})]}),e.jsx(ye,{})]});const X=Cs(c),G=(w=c==null?void 0:c.phases)==null?void 0:w.find(b=>{var K;return(K=b.milestones)==null?void 0:K.some(V=>V.completed!==!0)}),y=(_=G==null?void 0:G.milestones)==null?void 0:_.find(b=>b.completed!==!0),le=((U=y==null?void 0:y.resources)==null?void 0:U.slice(0,2).map(b=>({...b,imageUrl:b.image_url})))??[];return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(Re,{}),e.jsxs("div",{className:"container px-4 py-8 flex-grow",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome, ",l.first_name||"User"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Your learning journey"})]}),e.jsxs("div",{className:"mt-4 md:mt-0 flex items-center space-x-4",children:[e.jsx(ke,{className:"bg-empowerPurple capitalize",children:O(l)}),e.jsxs(ke,{variant:"outline",className:"border-empowerPurple text-empowerPurple capitalize",children:[e.jsx(Se,{className:"h-3 w-3 mr-1"}),k(l)," plan"]})]})]}),e.jsxs(F,{className:"mb-8 shadow-md",children:[e.jsxs(Z,{className:"pb-2",children:[e.jsx(ee,{children:"Goal"}),e.jsx(ue,{children:"Your target objective"})]}),e.jsxs(B,{children:[e.jsx("p",{className:"text-lg font-medium",children:E(l)}),l.challenges&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Challenges: ",l.challenges]})]})]}),e.jsxs(_t,{defaultValue:"overview",value:a,onValueChange:n,className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[e.jsxs(Ut,{className:"grid grid-cols-3 w-full sm:w-[400px] mb-4 sm:mb-0",children:[e.jsx(we,{value:"overview",children:"Overview"}),e.jsx(we,{value:"roadmap",children:"Roadmap"}),e.jsx(we,{value:"resources",children:"Resources"})]}),e.jsxs("div",{className:"flex items-center w-full sm:w-auto justify-end",children:[e.jsx("p",{className:"text-sm text-muted-foreground mr-2 whitespace-nowrap",children:"Progress:"}),e.jsxs("div",{className:"w-full sm:w-48 flex items-center",children:[e.jsx(ot,{value:R,className:"h-2 mr-2 flex-grow"}),e.jsxs("span",{className:"text-sm font-medium",children:[R,"%"]})]})]})]}),e.jsx(Ce,{value:"overview",className:"animate-fade-in",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(F,{className:"shadow-sm",children:[e.jsx(Z,{children:e.jsxs(ee,{className:"flex items-center",children:[e.jsx(Bt,{className:"h-5 w-5 mr-2 text-empowerPurple"}),"Focus"]})}),e.jsx(B,{children:y?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-medium",children:[G==null?void 0:G.title,": ",y.title]}),e.jsx("p",{className:"text-muted-foreground",children:y.description||"-"}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Se,{className:"h-4 w-4 mr-1"}),"Est: ",y.estimated_time||"N/A"]})]}):c?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(is,{className:"h-10 w-10 mx-auto text-green-500 mb-2"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"Roadmap Complete!"})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(oe,{className:"h-10 w-10 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No roadmap available."})]})}),e.jsx(Oe,{children:c&&e.jsxs(te,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n("roadmap"),children:[e.jsx(et,{className:"ml-2 h-4 w-4"}),"View Roadmap"]})})]}),e.jsxs(F,{className:"shadow-sm",children:[e.jsxs(Z,{children:[e.jsxs(ee,{className:"flex items-center",children:[e.jsx(xe,{className:"h-5 w-5 mr-2 text-empowerPurple"}),"Resources"]}),e.jsx(ue,{children:"Current step"})]}),e.jsx(B,{children:le.length>0?e.jsx("div",{className:"space-y-2",children:le.map(b=>e.jsxs("a",{href:b.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-2 hover:bg-muted rounded-md group",children:[e.jsx("div",{className:"w-10 h-10 rounded mr-3 flex-shrink-0 bg-muted flex items-center justify-center",children:b.imageUrl?e.jsx("img",{src:b.imageUrl,alt:b.title,className:"w-full h-full object-cover"}):e.jsx(xe,{className:"w-5 h-5 text-muted-foreground"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h4",{className:"font-medium text-sm group-hover:text-empowerPurple",children:b.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.type," • ",b.platform]})]}),e.jsx(qe,{className:"h-4 w-4 text-muted-foreground group-hover:text-empowerPurple ml-2"})]},b.id))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:y?"No resources.":"-"})}),e.jsx(Oe,{children:c&&e.jsxs(te,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n("resources"),children:[e.jsx(et,{className:"ml-2 h-4 w-4"}),"View All"]})})]}),e.jsxs(F,{className:"shadow-sm md:col-span-2",children:[e.jsx(Z,{children:e.jsxs(ee,{className:"flex items-center",children:[e.jsx(zt,{className:"h-5 w-5 mr-2 text-empowerPurple"}),"Profile"]})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("h3",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Background"}),e.jsx("p",{className:"font-medium capitalize",children:C(l)})]}),e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("h3",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Experience"}),e.jsx("p",{className:"font-medium capitalize",children:L(l)})]}),e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("h3",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Commitment"}),e.jsx("p",{className:"font-medium",children:l.time_available||"-"})]})]})})]})]})}),e.jsx(Ce,{value:"roadmap",className:"animate-fade-in",children:e.jsxs(F,{className:"shadow-sm",children:[e.jsxs(Z,{children:[e.jsx(ee,{children:"Learning Roadmap"}),e.jsx(ue,{children:"Your step-by-step guide"})]}),e.jsx(B,{children:c&&X&&X.length>0?e.jsx(xs,{phases:X,onMilestoneToggle:N}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(oe,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-medium mb-2",children:"No Roadmap Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Please complete onboarding or check back later."})]})})]})}),e.jsx(Ce,{value:"resources",className:"animate-fade-in",children:e.jsxs(F,{className:"shadow-sm",children:[e.jsxs(Z,{children:[e.jsx(ee,{children:"Learning Resources"}),e.jsx(ue,{children:"Curated materials for your journey"})]}),e.jsx(B,{children:c&&c.phases&&c.phases.length>0?c.phases.map((b,K)=>e.jsxs("div",{className:"mb-8 last:mb-0",children:[" ",e.jsx("h3",{className:"font-semibold text-lg mb-3",children:b.title})," ",b.milestones&&b.milestones.length>0?b.milestones.map((V,Nt)=>e.jsxs("div",{className:"mb-6 pl-4 border-l-2 border-border",children:[" ",e.jsx("h4",{className:"font-medium text-md mb-2",children:V.title})," ",V.resources&&V.resources.length>0?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[" ",V.resources.map(ve=>e.jsx(gs,{resource:{...ve,imageUrl:ve.image_url}},ve.id))," "]}):e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No resources."})," "]},V.id||Nt)):e.jsx("p",{className:"text-sm text-muted-foreground italic pl-4",children:"No milestones."})," ",K<c.phases.length-1&&e.jsx(xt,{className:"my-6"})," "]},b.id||K)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(oe,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-medium mb-2",children:"No Resources"}),e.jsx("p",{className:"text-muted-foreground",children:"Resources will appear with your roadmap."})]})})]})})]})]}),e.jsx(ye,{})]})};export{qs as default};
