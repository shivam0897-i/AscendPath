import{j as e,r as N,l as G,m as V,B as w,n as B}from"./index-BZCaGWrl.js";import{T as U,a as q,b as S,c as C}from"./tabs-SICFpIPQ.js";import{z as h,u as L,t as T,F as k,a as o,b as c,c as d,d as m,e as x}from"./form-DbMSX6zJ.js";import{I as u}from"./input-B8NlSBy-.js";import{N as z}from"./Navbar-9LRJRQIr.js";import"./index-UOOHzlnL.js";import"./label-CvyKLVHE.js";const I=()=>e.jsx("svg",{className:"mr-2 h-4 w-4","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:e.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.5 512 244 512 110.5 512 0 401.5 0 265.2 0 128.5 109.3 18.3 244 18.3c65.7 0 121.7 22.9 166.9 62.3l-68.2 67.4c-20.8-19.8-52.2-33.8-98.7-33.8-82.8 0-149.9 67.4-149.9 150.7s67.1 150.7 149.9 150.7c95.4 0 128.1-68.9 132.6-104.3H244v-85.3h236.1c2.3 12.7 3.9 26.1 3.9 40.8z"})}),E=h.object({email:h.string().email({message:"Please enter a valid email address"}),password:h.string().min(6,{message:"Password must be at least 6 characters"})}),M=E.extend({firstName:h.string().min(1,{message:"First name is required"}),lastName:h.string().min(1,{message:"Last name is required"}),confirmPassword:h.string().min(6,{message:"Password must be at least 6 characters"})}).refine(l=>l.password===l.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),A=({mode:l,onSuccess:g})=>{const[a,i]=N.useState(!1),{signIn:j,signUp:v,signInWithGoogle:p,isLoading:r}=G(),{toast:f}=V(),b=L({resolver:T(E),defaultValues:{email:"",password:""}}),t=L({resolver:T(M),defaultValues:{email:"",password:"",firstName:"",lastName:"",confirmPassword:""}}),y=async s=>{i(!0);try{if(l==="login"){const{error:n}=await j(s.email,s.password);n?f({title:"Login failed",description:n.message||"Please check your credentials and try again",variant:"destructive"}):(f({title:"Welcome back!",description:"You have successfully logged in.",duration:1e3}),g&&g())}else{const n=s,{error:F}=await v(n.email,n.password,n.firstName,n.lastName);F?f({title:"Signup failed",description:F.message||"There was an error creating your account",variant:"destructive"}):g&&g()}}catch{f({title:"An error occurred",description:"Please try again later",variant:"destructive"})}finally{i(!1)}},P=async()=>{i(!0);try{await p()}catch(s){console.error("Google Sign In initiation failed",s)}finally{}};return e.jsx("div",{className:"w-full max-w-md mx-auto",children:l==="login"?e.jsx(k,{...b,children:e.jsxs("form",{onSubmit:b.handleSubmit(y),className:"space-y-6",children:[e.jsx(o,{control:b.control,name:"email",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Email"}),e.jsx(m,{children:e.jsx(u,{placeholder:"you@example.com",...s,disabled:r||a})}),e.jsx(x,{})]})}),e.jsx(o,{control:b.control,name:"password",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Password"}),e.jsx(m,{children:e.jsx(u,{type:"password",placeholder:"••••••••",...s,disabled:r||a})}),e.jsx(x,{})]})}),e.jsx(w,{type:"submit",className:"w-full bg-empowerPurple hover:bg-empowerPurple-dark",disabled:r||a,children:a?"Logging in...":"Log in"}),e.jsxs("div",{className:"relative my-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),e.jsx(w,{variant:"outline",type:"button",className:"w-full",onClick:P,disabled:r||a,children:r?"Processing...":e.jsxs(e.Fragment,{children:[e.jsx(I,{})," Google"]})})]})}):e.jsx(k,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(y),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(o,{control:t.control,name:"firstName",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"First Name"}),e.jsx(m,{children:e.jsx(u,{placeholder:"Jane",...s,disabled:r||a})}),e.jsx(x,{})]})}),e.jsx(o,{control:t.control,name:"lastName",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Last Name"}),e.jsx(m,{children:e.jsx(u,{placeholder:"Doe",...s,disabled:r||a})}),e.jsx(x,{})]})})]}),e.jsx(o,{control:t.control,name:"email",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Email"}),e.jsx(m,{children:e.jsx(u,{placeholder:"you@example.com",...s,disabled:r||a})}),e.jsx(x,{})]})}),e.jsx(o,{control:t.control,name:"password",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Password"}),e.jsx(m,{children:e.jsx(u,{type:"password",placeholder:"••••••••",...s,disabled:r||a})}),e.jsx(x,{})]})}),e.jsx(o,{control:t.control,name:"confirmPassword",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Confirm Password"}),e.jsx(m,{children:e.jsx(u,{type:"password",placeholder:"••••••••",...s,disabled:r||a})}),e.jsx(x,{})]})}),e.jsx(w,{type:"submit",className:"w-full bg-empowerPurple hover:bg-empowerPurple-dark",disabled:r||a,children:a?"Creating account...":"Create account"}),e.jsxs("div",{className:"relative my-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),e.jsx(w,{variant:"outline",type:"button",className:"w-full",onClick:P,disabled:r||a,children:r?"Processing...":e.jsxs(e.Fragment,{children:[e.jsx(I,{})," Google"]})})]})})})},K=()=>{const[l,g]=N.useState("login"),a=B(),{user:i,isLoading:j}=G();N.useEffect(()=>{!j&&i&&(console.log("User already logged in, redirecting to dashboard."),a("/dashboard"))},[i,j,a]);const v=r=>{g(r)},p=()=>{console.log("Auth successful, navigating to dashboard."),a("/dashboard")};return j||i?e.jsx("div",{className:"min-h-screen flex items-center justify-center"}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(z,{minimal:!0}),e.jsx("div",{className:"flex-grow flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-background",children:e.jsxs("div",{className:"max-w-md w-full space-y-8 bg-card p-8 rounded-lg shadow-md",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-extrabold gradient-text",children:"AscendPath"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:l==="login"?"Log in to your account":"Create a new account"})]}),e.jsxs(U,{value:l,onValueChange:v,className:"w-full",children:[e.jsxs(q,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsx(S,{value:"login",children:"Login"}),e.jsx(S,{value:"signup",children:"Sign Up"})]}),e.jsx(C,{value:"login",children:e.jsx(A,{mode:"login",onSuccess:p})}),e.jsx(C,{value:"signup",children:e.jsx(A,{mode:"signup",onSuccess:p})})]})]})})]})};export{K as default};
